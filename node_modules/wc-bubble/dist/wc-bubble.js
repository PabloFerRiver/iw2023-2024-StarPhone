!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["wc-bubble"]=e():t["wc-bubble"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(a=o.key,r=void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a),"symbol"===n(r)?r:String(r)),o)}var a,r}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function s(t,e,n){return s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&a(o,n.prototype),o},s.apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)},l(t)}t.r(e),t.d(e,{default:()=>u});var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(d,t);var e,s,l,c,u=(l=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=r(l);if(c){var i=r(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}(this,t)});function d(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this)).attachShadow({mode:"open"}),t.dispatchMountedEvent=t.dispatchMountedEvent.bind(o(t)),t.props={delay:0,avatar:'data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><rect x="45" y="55" width="110" height="100" rx="20" fill-opacity="0" stroke="black" stroke-width="15"></rect><circle cx="75" cy="95" r="10" fill="black"></circle><circle cx="125" cy="95" r="10" fill="black"></circle><line x1="75" y1="125" x2="125" y2="125" stroke="black" stroke-width="10"></line><ellipse cx="30" cy="95" rx="10" ry="10" fill="black" stroke="black" stroke-width="10"></ellipse><ellipse cx="170" cy="95" rx="10" ry="10" fill="black" stroke="black" stroke-width="10"></ellipse><circle cx="100" cy="30" r="10" fill="black" stroke="black" stroke-width="10"></circle><line x1="100" y1="35" x2="100" y2="55" stroke="black" stroke-width="10"></line></svg>'},t.msgElement=null,t.bubbleElement=null,t._isContinued=!1,t._isRight=!1,t._isLoading=!1,t}return e=d,(s=[{key:"connectedCallback",value:function(){if(this.hasAttribute("delay")){var t=this.getAttribute("delay");if(null!==t){var e=parseInt(t);this.props.delay=isNaN(e)?0:e>0?e:0}}var n=document.createElement("div");if(n.classList.add("chat-message"),this.hasAttribute("continued")&&(n.classList.add("continue"),this._isContinued=!0),this.hasAttribute("right")&&(n.classList.add("right"),this._isRight=!0),this.hasAttribute("loading")&&(this._isLoading=!0),this.hasAttribute("avatar")&&(this.props.avatar=this.getAttribute("avatar")),this.bubbleElement=this.genBubbleElement(),n.append(this.genAvatarElement()),n.append(this.bubbleElement),this.msgElement=n,null!==this.shadowRoot){var i=new CSSStyleSheet;i.replaceSync(':host{--chat-bubble-color: #FFFFFF;--chat-bubble-right-color: #F6ECCC;--chat-bubble-font-color: #000000;--chat-bubble-font-right-color: #000000;--chat-bubble-avatar-color: #CCCCCC;--chat-bubble-delay: 0.5s}::slotted(p){margin:0 !important}.chat-message{display:flex}.chat-message .chat-bubble{font-weight:400;font-family:"PingFang SC","Noto Sans TC","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;position:relative;width:max-content;background-color:var(--chat-bubble-color);border-radius:20px;box-shadow:0 0 1px rgba(0,0,0,.3);padding:10px 20px;margin:10px 15px 0px;max-width:min(60%,600px);animation:scale-in .2s ease,fade-in .2s ease;transform-origin:top left;transition:width .5s ease,height .5s ease,left .5s ease;animation-fill-mode:backwards;animation-delay:calc(var(--chat-bubble-delay)*var(--bubble-index));color:var(--chat-bubble-font-color)}.chat-message .chat-bubble .chat-content{word-wrap:break-word;overflow:hidden}.chat-message .chat-bubble::before{content:"";position:absolute;border:0 solid rgba(0,0,0,0);border-bottom:7px solid var(--chat-bubble-color);border-radius:0 0 0 20px;width:12px;height:12px;top:-5px;left:-7px}.chat-message .chat-bubble p{margin:0}.chat-message .avatar{width:36px;height:36px;border-radius:100%;background-color:var(--chat-bubble-avatar-color);overflow:hidden;animation:scale-in 0s ease;animation-fill-mode:backwards;animation-delay:calc(var(--chat-bubble-delay)*var(--bubble-index))}.chat-message .avatar img{width:80%;height:80%;margin:10%}.chat-message.right{justify-content:end}.chat-message.right .chat-bubble{background:var(--chat-bubble-right-color);color:var(--chat-bubble-font-right-color);transform-origin:top right}.chat-message.right .chat-bubble::before{border-radius:0 0 20px 0;border-color:var(--chat-bubble-right-color);left:auto;right:-7px}.chat-message.right .avatar{display:none}.chat-message.continue .chat-bubble::before{display:none}.chat-message.continue .avatar{opacity:0}.chat-message.continue .avatar img{display:none}.chat-message .chat-bubble.animation-scale-out{animation:scale-out .2s ease-in-out forwards,fade-out .2s ease-in-out forwards}@keyframes scale-in{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes scale-out{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes fade-in{0%{opacity:0}50%{opacity:1}100%{opacity:1}}@keyframes fade-out{0%{opacity:1}50%{opacity:0}100%{opacity:0}}.typing-indicator{display:flex;align-items:start;margin-left:20px;color:#666}.typing-indicator .dots{display:flex;margin:10px auto;gap:8px}.typing-indicator .dots .dot{width:5px;height:5px;border-radius:100%;background-color:#666;animation:pulse 1.5s ease-in-out infinite}.typing-indicator .dots .dot:nth-child(2){animation-delay:.2s}.typing-indicator .dots .dot:nth-child(3){animation-delay:.4s}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.5)}100%{transform:scale(1)}}'),this.shadowRoot.adoptedStyleSheets=[i],this.shadowRoot.append(n)}}},{key:"removeGracefully",value:function(){var t=this;null!==this.bubbleElement&&(this.bubbleElement.addEventListener("animationend",(function(){var e=t.parentElement;null!==e?e.removeChild(t):t.remove()})),this.bubbleElement.classList.add("animation-scale-out"))}},{key:"dispatchMountedEvent",value:function(){var t=new CustomEvent("mounted");this.dispatchEvent(t),null!==this.bubbleElement&&this.bubbleElement.removeEventListener("animationend",this.dispatchMountedEvent)}},{key:"continued",get:function(){return this._isContinued},set:function(t){this._isContinued=t,null!==this.msgElement&&(this._isContinued?this.msgElement.classList.add("continue"):this.msgElement.classList.remove("continue"))}},{key:"right",get:function(){return this._isRight},set:function(t){this._isRight=t,null!==this.msgElement&&(this._isRight?this.msgElement.classList.add("right"):this.msgElement.classList.remove("right"))}},{key:"loading",get:function(){return this._isLoading},set:function(t){this._isLoading=t,null!==this.bubbleElement&&(this._isLoading?(this.bubbleElement.classList.add("typing-indicator"),this.bubbleElement.innerHTML='<div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>'):(this.bubbleElement.classList.remove("typing-indicator"),this.bubbleElement.innerHTML="<slot></slot>"))}},{key:"genAvatarElement",value:function(){var t=document.createElement("div"),e=document.createElement("img");return t.classList.add("avatar"),t.style.setProperty("--bubble-index",String(this.props.delay)),e.src=this.props.avatar,t.append(e),t}},{key:"genBubbleElement",value:function(){var t=document.createElement("div");t.classList.add("chat-bubble");var e=document.createElement("div");return e.classList.add("chat-content"),t.appendChild(e),this.hasAttribute("loading")?(t.classList.add("typing-indicator"),e.innerHTML='<div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>'):e.appendChild(document.createElement("slot")),t.style.setProperty("--bubble-index",String(this.props.delay)),t.addEventListener("animationend",this.dispatchMountedEvent),t}}])&&i(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),d}(l(HTMLElement));void 0===customElements.get("chat-bubble")&&window.customElements.define("chat-bubble",c);const u=c;return e})()));
//# sourceMappingURL=wc-bubble.js.map